---
phase: 03-advanced-extensions
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/slice/SKILL.md
  - skills/help/SKILL.md
autonomous: true

must_haves:
  truths:
    - "Running /pl:slice <figma-link> fetches design context from Figma MCP"
    - "Skill follows the 8-step Figma MCP tool sequence"
    - "Generated component code matches project conventions"
    - "Skill checks for MCP availability and provides setup instructions"
    - "Help command shows all 6 commands including research and slice"
  artifacts:
    - path: "skills/slice/SKILL.md"
      provides: "Figma design-to-code conversion skill"
      contains: "get_design_context"
    - path: "skills/help/SKILL.md"
      provides: "Updated help showing all 6 commands"
      contains: "/pl:research"
  key_links:
    - from: "skills/slice/SKILL.md"
      to: "Figma MCP server"
      via: "mcp__figma__* tools"
      pattern: "get_design_context|get_screenshot|get_variable_defs"
---

<objective>
Create the `/pl:slice` skill that converts Figma designs to component code using the Figma MCP integration, and update the help command to show all 6 available commands.

Purpose: Enable Figma-to-code workflows that leverage Figma's MCP server for structured design extraction and team-convention-aware code generation.

Output: `skills/slice/SKILL.md` skill file and updated `skills/help/SKILL.md`.
</objective>

<execution_context>
@/Users/deprasny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/deprasny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-advanced-extensions/03-RESEARCH.md
@skills/review/SKILL.md
@skills/help/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create slice skill with Figma MCP integration</name>
  <files>skills/slice/SKILL.md</files>
  <action>
Create `skills/slice/SKILL.md` with the following structure:

**Frontmatter:**
```yaml
---
name: slice
description: Convert Figma design to component code using MCP integration. Provide a Figma frame link.
disable-model-invocation: true
argument-hint: <figma-link>
---
```

**Key components to include:**

1. **Target section** - Parse $ARGUMENTS as the Figma link. If no link provided, ask user.

2. **Prerequisites Check section** - Instructions to verify Figma MCP is available. If not configured, provide setup instructions:
   - Remote: `claude mcp add --transport http figma https://mcp.figma.com/mcp`
   - Desktop: `claude mcp add --transport http figma-desktop http://127.0.0.1:3845/mcp`

3. **Workflow section** with 8 steps:
   - Step 1: Parse Figma Link - Extract node-id (X-Y to X:Y format), handle branch URLs
   - Step 2: Get Design Context - Call `get_design_context` with node-id
   - Step 3: Get Visual Reference - Call `get_screenshot` for layout fidelity
   - Step 4: Get Design Tokens - Call `get_variable_defs` for colors/spacing/typography
   - Step 5: Check Code Connect - Call `get_code_connect_map` for existing mappings
   - Step 6: Analyze Project Conventions - Scan src/components/, check styling approach
   - Step 7: Generate Component - Transform Figma output to match project patterns
   - Step 8: Report - Structured output with file path, tokens used, component mappings

4. **Output Format section** - Define structured report:
   - Component Generated heading
   - File path
   - Design Tokens Used table (Token Type, Figma Value, Project Token)
   - Component Mappings table (Figma Component, Code Component, Source)
   - Generated Code Preview
   - Notes section

5. **Important section** - Notes that skill requires Figma MCP, follows project conventions, needs review

Reference the code example in 03-RESEARCH.md for the exact implementation pattern.

Do NOT restrict tools - the skill needs full access for code generation.
  </action>
  <verify>
Verify the skill file:
1. `ls skills/slice/SKILL.md` - file exists
2. Check frontmatter has correct fields: name, description, disable-model-invocation, argument-hint
3. Check content includes: prerequisites check, 8-step workflow, MCP tool calls, structured output
  </verify>
  <done>
`skills/slice/SKILL.md` exists with Figma MCP integration following the 8-step workflow, including prerequisites check, node-id parsing, MCP tool sequence, project convention analysis, and structured output format.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update help command with all 6 commands</name>
  <files>skills/help/SKILL.md</files>
  <action>
Update `skills/help/SKILL.md` to include the new research and slice commands:

1. Update the "Available Commands" table to include all 6 commands:
   - /pl:help
   - /pl:init
   - /pl:review <file>
   - /pl:refactor <file>
   - /pl:research <topic>
   - /pl:slice <figma-link>

2. Remove the "Coming Soon" section since research and slice are now implemented.

3. Keep the existing Usage, About, and GitHub link sections.

4. Ensure descriptions are concise and include argument hints for commands that take arguments.
  </action>
  <verify>
Verify the help file:
1. `cat skills/help/SKILL.md` - shows all 6 commands in table
2. No "Coming Soon" section remains
3. Descriptions match the actual skill descriptions
  </verify>
  <done>
`skills/help/SKILL.md` shows all 6 commands (help, init, review, refactor, research, slice) with correct descriptions and argument hints.
  </done>
</task>

</tasks>

<verification>
Phase verification for slice skill and help update:
1. File `skills/slice/SKILL.md` exists
2. Skill includes MCP prerequisites check
3. Skill follows 8-step Figma workflow
4. Skill outputs structured report format
5. Help skill shows all 6 commands
</verification>

<success_criteria>
- Slice skill created at correct path
- Skill frontmatter has required fields
- Skill includes MCP setup instructions
- Skill follows documented Figma MCP tool sequence
- Help command updated to show all 6 commands
</success_criteria>

<output>
After completion, create `.planning/phases/03-advanced-extensions/03-02-SUMMARY.md`
</output>
